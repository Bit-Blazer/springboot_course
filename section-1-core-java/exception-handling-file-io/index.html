
<!doctype html>

<html>
<head>
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <meta name="theme-color" content="#4F7DC9">
  <meta charset="UTF-8">
  <title>Exception Handling &amp; File I/O</title>
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Code+Pro:400|Roboto:400,300,400italic,500,700|Roboto+Mono">
  <link rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://storage.googleapis.com/claat-public/codelab-elements.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.11.1/build/styles/monokai.min.css">
  <link rel="stylesheet" href="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.css">
  <style>
    .success {
      color: #1e8e3e;
    }
    .error {
      color: red;
    }
  </style>
</head>
<body>
  <google-codelab-analytics ga4id="G-XXXXXXXXXX"></google-codelab-analytics>
  <google-codelab codelab-ga4id="G-4LV2JBSBPM"
                  id="exception-handling-file-io"
                  title="Exception Handling &amp; File I/O"
                  environment="web"
                  feedback-link="">
    
      <google-codelab-step label="Introduction" duration="2">
        <p>Robust applications must handle errors gracefully and persist data. In this codelab, you&#39;ll master Java&#39;s exception handling mechanisms and file I/O operations by building a real-world contact management system.</p>
<h2 class="checklist" is-upgraded>What You&#39;ll Learn</h2>
<ul class="checklist">
<li>Exception hierarchy and types (checked vs unchecked)</li>
<li>Try-catch-finally blocks and error handling patterns</li>
<li>Throws clause and throw keyword</li>
<li>Creating custom exceptions</li>
<li>File class and file operations</li>
<li>Reading and writing files (FileReader, FileWriter, BufferedReader, BufferedWriter)</li>
<li>Try-with-resources for automatic resource management</li>
<li>Best practices for error handling and recovery</li>
</ul>
<h2 is-upgraded>What You&#39;ll Build</h2>
<p>A <strong>Contact Management System</strong> featuring:</p>
<ul>
<li>Add, update, delete, and search contacts</li>
<li>CSV file-based persistent storage</li>
<li>Comprehensive error handling</li>
<li>Custom exceptions for validation</li>
<li>Automatic resource management</li>
<li>Graceful error recovery</li>
</ul>
<h2 is-upgraded>Prerequisites</h2>
<ul>
<li>Completed Codelab 1.1 and 1.2</li>
<li>Understanding of OOP concepts</li>
<li>Java JDK 17+ installed</li>
</ul>


      </google-codelab-step>
    
      <google-codelab-step label="Understanding Exceptions" duration="10">
        <p>Exceptions are events that disrupt normal program flow. Let&#39;s understand how Java handles them.</p>
<h2 is-upgraded>Exception Hierarchy</h2>
<pre><code>Throwable
â”œâ”€â”€ Error (unchecked - system errors)
â”‚   â”œâ”€â”€ OutOfMemoryError
â”‚   â”œâ”€â”€ StackOverflowError
â”‚   â””â”€â”€ ...
â””â”€â”€ Exception
    â”œâ”€â”€ RuntimeException (unchecked)
    â”‚   â”œâ”€â”€ NullPointerException
    â”‚   â”œâ”€â”€ ArrayIndexOutOfBoundsException
    â”‚   â”œâ”€â”€ IllegalArgumentException
    â”‚   â””â”€â”€ ...
    â””â”€â”€ Checked Exceptions
        â”œâ”€â”€ IOException
        â”œâ”€â”€ SQLException
        â”œâ”€â”€ ClassNotFoundException
        â””â”€â”€ ...
</code></pre>
<h2 is-upgraded>Checked vs Unchecked Exceptions</h2>
<p><strong>Checked Exceptions:</strong></p>
<ul>
<li>Must be handled or declared</li>
<li>Compiler enforces handling</li>
<li>Examples: IOException, SQLException</li>
<li>Represent recoverable conditions</li>
</ul>
<p><strong>Unchecked Exceptions (RuntimeException):</strong></p>
<ul>
<li>Not required to be handled</li>
<li>Indicate programming errors</li>
<li>Examples: NullPointerException, ArrayIndexOutOfBoundsException</li>
<li>Should be prevented through better code</li>
</ul>
<aside class="special"><p><strong>Rule of Thumb:</strong> If a client can reasonably be expected to recover, use checked exceptions. If nothing can be done, use unchecked exceptions.</p>
</aside>
<h2 is-upgraded>Common Exception Examples</h2>
<p><strong>NullPointerException:</strong></p>
<pre><code language="language-java" class="language-java">public class NullPointerDemo {
    public static void main(String[] args) {
        String name = null;
        System.out.println(name.length());  // NullPointerException!
    }
}
</code></pre>
<p><strong>ArrayIndexOutOfBoundsException:</strong></p>
<pre><code language="language-java" class="language-java">public class ArrayDemo {
    public static void main(String[] args) {
        int[] numbers = {1, 2, 3};
        System.out.println(numbers[5]);  // ArrayIndexOutOfBoundsException!
    }
}
</code></pre>
<p><strong>NumberFormatException:</strong></p>
<pre><code language="language-java" class="language-java">public class ParseDemo {
    public static void main(String[] args) {
        String text = &#34;abc&#34;;
        int number = Integer.parseInt(text);  // NumberFormatException!
    }
}
</code></pre>
<aside class="warning"><p><strong>Important:</strong> Unchecked exceptions usually indicate bugs in your code. Fix the root cause instead of catching them!</p>
</aside>


      </google-codelab-step>
    
      <google-codelab-step label="Try-Catch-Finally" duration="12">
        <p>The try-catch-finally block is the foundation of exception handling.</p>
<h2 is-upgraded>Basic Try-Catch</h2>
<pre><code language="language-java" class="language-java">public class BasicExceptionHandling {
    public static void main(String[] args) {
        try {
            int result = 10 / 0;  // ArithmeticException
            System.out.println(&#34;Result: &#34; + result);
        } catch (ArithmeticException e) {
            System.out.println(&#34;Error: Cannot divide by zero!&#34;);
            System.out.println(&#34;Exception message: &#34; + e.getMessage());
        }

        System.out.println(&#34;Program continues...&#34;);
    }
}
</code></pre>
<p>Output:</p>
<pre>Error: Cannot divide by zero!
Exception message: / by zero
Program continues...
</pre>
<h2 is-upgraded>Multiple Catch Blocks</h2>
<pre><code language="language-java" class="language-java">public class MultipleCatch {
    public static void main(String[] args) {
        String[] data = {&#34;10&#34;, &#34;20&#34;, &#34;abc&#34;, &#34;30&#34;};

        for (String item : data) {
            try {
                int number = Integer.parseInt(item);
                int result = 100 / number;
                System.out.println(&#34;Result: &#34; + result);
            } catch (NumberFormatException e) {
                System.out.println(&#34;&#39;&#34; + item + &#34;&#39; is not a valid number&#34;);
            } catch (ArithmeticException e) {
                System.out.println(&#34;Cannot divide by zero for value: &#34; + item);
            }
        }
    }
}
</code></pre>
<h2 is-upgraded>Multi-Catch (Java 7+)</h2>
<p>Handle multiple exceptions in one catch block:</p>
<pre><code language="language-java" class="language-java">try {
    // risky code
} catch (IOException | SQLException e) {
    System.out.println(&#34;Database or file error: &#34; + e.getMessage());
}
</code></pre>
<h2 is-upgraded>Finally Block</h2>
<p><strong>Always executes</strong>, whether exception occurs or not:</p>
<pre><code language="language-java" class="language-java">public class FinallyDemo {
    public static void main(String[] args) {
        java.util.Scanner scanner = null;

        try {
            scanner = new java.util.Scanner(System.in);
            System.out.print(&#34;Enter a number: &#34;);
            int number = scanner.nextInt();
            System.out.println(&#34;You entered: &#34; + number);
        } catch (Exception e) {
            System.out.println(&#34;Invalid input!&#34;);
        } finally {
            if (scanner != null) {
                scanner.close();
                System.out.println(&#34;Scanner closed&#34;);
            }
        }
    }
}
</code></pre>
<aside class="special"><p><strong>Key Insight:</strong> Finally block is perfect for cleanup operations - closing files, database connections, network sockets, etc.</p>
</aside>
<h2 is-upgraded>Complete Try-Catch-Finally Example</h2>
<pre><code language="language-java" class="language-java">import java.io.*;

public class FileReadDemo {
    public static void main(String[] args) {
        BufferedReader reader = null;

        try {
            reader = new BufferedReader(new FileReader(&#34;data.txt&#34;));
            String line = reader.readLine();
            System.out.println(&#34;First line: &#34; + line);
        } catch (FileNotFoundException e) {
            System.out.println(&#34;File not found: &#34; + e.getMessage());
        } catch (IOException e) {
            System.out.println(&#34;Error reading file: &#34; + e.getMessage());
        } finally {
            try {
                if (reader != null) {
                    reader.close();
                }
            } catch (IOException e) {
                System.out.println(&#34;Error closing file: &#34; + e.getMessage());
            }
        }
    }
}
</code></pre>
<aside class="warning"><p><strong>Watch Out:</strong> Nested try-catch in finally is verbose! Use try-with-resources instead (next section).</p>
</aside>


      </google-codelab-step>
    
      <google-codelab-step label="Try-With-Resources" duration="8">
        <p>Try-with-resources automatically closes resources, making code cleaner and safer.</p>
<h2 is-upgraded>Syntax</h2>
<pre><code language="language-java" class="language-java">try (ResourceType resource = new ResourceType()) {
    // Use resource
} catch (Exception e) {
    // Handle exception
}
// resource is automatically closed here
</code></pre>
<h2 is-upgraded>File Reading Example</h2>
<p><strong>Old way (verbose):</strong></p>
<pre><code language="language-java" class="language-java">BufferedReader reader = null;
try {
    reader = new BufferedReader(new FileReader(&#34;file.txt&#34;));
    String line = reader.readLine();
} catch (IOException e) {
    e.printStackTrace();
} finally {
    try {
        if (reader != null) reader.close();
    } catch (IOException e) {
        e.printStackTrace();
    }
}
</code></pre>
<p><strong>New way (clean):</strong></p>
<pre><code language="language-java" class="language-java">try (BufferedReader reader = new BufferedReader(new FileReader(&#34;file.txt&#34;))) {
    String line = reader.readLine();
    System.out.println(line);
} catch (IOException e) {
    System.out.println(&#34;Error: &#34; + e.getMessage());
}
</code></pre>
<h2 is-upgraded>Multiple Resources</h2>
<pre><code language="language-java" class="language-java">try (
    FileReader fileReader = new FileReader(&#34;input.txt&#34;);
    BufferedReader bufferedReader = new BufferedReader(fileReader);
    FileWriter fileWriter = new FileWriter(&#34;output.txt&#34;);
    BufferedWriter bufferedWriter = new BufferedWriter(fileWriter)
) {
    String line;
    while ((line = bufferedReader.readLine()) != null) {
        bufferedWriter.write(line.toUpperCase());
        bufferedWriter.newLine();
    }
} catch (IOException e) {
    System.out.println(&#34;Error processing files: &#34; + e.getMessage());
}
</code></pre>
<h2 is-upgraded>AutoCloseable Interface</h2>
<p>Any class implementing <code>AutoCloseable</code> or <code>Closeable</code> can be used with try-with-resources:</p>
<pre><code language="language-java" class="language-java">public class CustomResource implements AutoCloseable {
    public CustomResource() {
        System.out.println(&#34;Resource opened&#34;);
    }

    public void doWork() {
        System.out.println(&#34;Working...&#34;);
    }

    @Override
    public void close() {
        System.out.println(&#34;Resource closed&#34;);
    }
}

// Usage
try (CustomResource resource = new CustomResource()) {
    resource.doWork();
}
</code></pre>
<aside class="special"><p><strong>Best Practice:</strong> Always use try-with-resources for file operations, database connections, and network sockets. It&#39;s safer and cleaner!</p>
</aside>


      </google-codelab-step>
    
      <google-codelab-step label="Throws and Throw Keywords" duration="10">
        <p>The <code>throws</code> clause declares exceptions, while <code>throw</code> explicitly throws them.</p>
<h2 is-upgraded>Throws Clause</h2>
<p>Declare that a method might throw exceptions:</p>
<pre><code language="language-java" class="language-java">public class FileProcessor {

    // Declares it might throw IOException
    public String readFile(String filename) throws IOException {
        BufferedReader reader = new BufferedReader(new FileReader(filename));
        String content = reader.readLine();
        reader.close();
        return content;
    }

    // Multiple exceptions
    public void processData(String filename)
            throws IOException, SQLException {
        // Method implementation
    }
}
</code></pre>
<p><strong>Caller must handle or declare:</strong></p>
<pre><code language="language-java" class="language-java">public class Main {
    public static void main(String[] args) {
        FileProcessor processor = new FileProcessor();

        // Option 1: Handle the exception
        try {
            String content = processor.readFile(&#34;data.txt&#34;);
            System.out.println(content);
        } catch (IOException e) {
            System.out.println(&#34;Error reading file: &#34; + e.getMessage());
        }
    }

    // Option 2: Propagate the exception
    public static void anotherMethod() throws IOException {
        FileProcessor processor = new FileProcessor();
        String content = processor.readFile(&#34;data.txt&#34;);
    }
}
</code></pre>
<h2 is-upgraded>Throw Keyword</h2>
<p>Explicitly throw an exception:</p>
<pre><code language="language-java" class="language-java">public class ValidationExample {

    public void setAge(int age) {
        if (age &lt; 0 || age &gt; 150) {
            throw new IllegalArgumentException(
                &#34;Age must be between 0 and 150, got: &#34; + age
            );
        }
        this.age = age;
    }

    public void processPayment(double amount) {
        if (amount &lt;= 0) {
            throw new IllegalArgumentException(&#34;Amount must be positive&#34;);
        }

        if (amount &gt; 10000) {
            throw new IllegalStateException(&#34;Amount exceeds transaction limit&#34;);
        }

        // Process payment
    }

    private int age;
}
</code></pre>
<h2 is-upgraded>Re-throwing Exceptions</h2>
<pre><code language="language-java" class="language-java">public void processFile(String filename) throws IOException {
    try {
        // File operations
        BufferedReader reader = new BufferedReader(new FileReader(filename));
        // ... processing ...
    } catch (FileNotFoundException e) {
        System.out.println(&#34;File not found: &#34; + filename);
        throw e;  // Re-throw for caller to handle
    } catch (IOException e) {
        System.out.println(&#34;Error reading file&#34;);
        throw new IOException(&#34;Failed to process: &#34; + filename, e);
    }
}
</code></pre>
<aside class="special"><p><strong>Tip:</strong> Re-throw exceptions when you want to log/handle locally but still notify the caller.</p>
</aside>


      </google-codelab-step>
    
      <google-codelab-step label="Custom Exceptions" duration="12">
        <p>Create your own exception classes for domain-specific errors.</p>
<h2 is-upgraded>Creating Checked Custom Exceptions</h2>
<p><strong>InvalidContactException.java:</strong></p>
<pre><code language="language-java" class="language-java">public class InvalidContactException extends Exception {

    // No-arg constructor
    public InvalidContactException() {
        super(&#34;Invalid contact data&#34;);
    }

    // Constructor with message
    public InvalidContactException(String message) {
        super(message);
    }

    // Constructor with message and cause
    public InvalidContactException(String message, Throwable cause) {
        super(message, cause);
    }

    // Constructor with cause
    public InvalidContactException(Throwable cause) {
        super(cause);
    }
}
</code></pre>
<p><strong>FileOperationException.java:</strong></p>
<pre><code language="language-java" class="language-java">public class FileOperationException extends Exception {
    private String filename;
    private String operation;

    public FileOperationException(String filename, String operation) {
        super(&#34;Failed to &#34; + operation + &#34; file: &#34; + filename);
        this.filename = filename;
        this.operation = operation;
    }

    public FileOperationException(String filename, String operation, Throwable cause) {
        super(&#34;Failed to &#34; + operation + &#34; file: &#34; + filename, cause);
        this.filename = filename;
        this.operation = operation;
    }

    public String getFilename() {
        return filename;
    }

    public String getOperation() {
        return operation;
    }
}
</code></pre>
<h2 is-upgraded>Creating Unchecked Custom Exceptions</h2>
<p><strong>ContactNotFoundException.java:</strong></p>
<pre><code language="language-java" class="language-java">public class ContactNotFoundException extends RuntimeException {
    private String contactId;

    public ContactNotFoundException(String contactId) {
        super(&#34;Contact not found: &#34; + contactId);
        this.contactId = contactId;
    }

    public String getContactId() {
        return contactId;
    }
}
</code></pre>
<h2 is-upgraded>Using Custom Exceptions</h2>
<pre><code language="language-java" class="language-java">public class ContactValidator {

    public void validateEmail(String email) throws InvalidContactException {
        if (email == null || email.trim().isEmpty()) {
            throw new InvalidContactException(&#34;Email cannot be empty&#34;);
        }

        if (!email.contains(&#34;@&#34;)) {
            throw new InvalidContactException(&#34;Invalid email format: &#34; + email);
        }
    }

    public void validatePhone(String phone) throws InvalidContactException {
        if (phone == null || phone.trim().isEmpty()) {
            throw new InvalidContactException(&#34;Phone cannot be empty&#34;);
        }

        // Remove non-digits
        String digitsOnly = phone.replaceAll(&#34;[^0-9]&#34;, &#34;&#34;);

        if (digitsOnly.length() &lt; 10) {
            throw new InvalidContactException(
                &#34;Phone number must have at least 10 digits: &#34; + phone
            );
        }
    }

    public void validateName(String name) throws InvalidContactException {
        if (name == null || name.trim().isEmpty()) {
            throw new InvalidContactException(&#34;Name cannot be empty&#34;);
        }

        if (name.length() &lt; 2) {
            throw new InvalidContactException(&#34;Name too short: &#34; + name);
        }
    }
}
</code></pre>
<aside class="special"><p><strong>Design Decision:</strong> Use checked exceptions for recoverable conditions (validation errors), unchecked for programming errors (null references).</p>
</aside>


      </google-codelab-step>
    
      <google-codelab-step label="File Operations" duration="15">
        <p>Let&#39;s explore Java&#39;s file I/O capabilities.</p>
<h2 is-upgraded>File Class Basics</h2>
<pre><code language="language-java" class="language-java">import java.io.File;

public class FileBasics {
    public static void main(String[] args) {
        File file = new File(&#34;contacts.csv&#34;);

        // Check file properties
        System.out.println(&#34;Exists: &#34; + file.exists());
        System.out.println(&#34;Is File: &#34; + file.isFile());
        System.out.println(&#34;Is Directory: &#34; + file.isDirectory());
        System.out.println(&#34;Can Read: &#34; + file.canRead());
        System.out.println(&#34;Can Write: &#34; + file.canWrite());
        System.out.println(&#34;Size: &#34; + file.length() + &#34; bytes&#34;);
        System.out.println(&#34;Absolute Path: &#34; + file.getAbsolutePath());
        System.out.println(&#34;Name: &#34; + file.getName());

        // Create new file
        try {
            if (file.createNewFile()) {
                System.out.println(&#34;File created: &#34; + file.getName());
            } else {
                System.out.println(&#34;File already exists&#34;);
            }
        } catch (IOException e) {
            System.out.println(&#34;Error creating file: &#34; + e.getMessage());
        }

        // Delete file
        if (file.delete()) {
            System.out.println(&#34;File deleted&#34;);
        }
    }
}
</code></pre>
<h2 is-upgraded>Directory Operations</h2>
<pre><code language="language-java" class="language-java">import java.io.File;

public class DirectoryOperations {
    public static void main(String[] args) {
        // Create directory
        File dir = new File(&#34;contacts_data&#34;);
        if (dir.mkdir()) {
            System.out.println(&#34;Directory created&#34;);
        }

        // Create nested directories
        File nestedDir = new File(&#34;data/contacts/archive&#34;);
        if (nestedDir.mkdirs()) {
            System.out.println(&#34;Nested directories created&#34;);
        }

        // List files in directory
        File currentDir = new File(&#34;.&#34;);
        String[] files = currentDir.list();
        System.out.println(&#34;Files in current directory:&#34;);
        for (String filename : files) {
            System.out.println(&#34;  &#34; + filename);
        }

        // List with File objects
        File[] fileObjects = currentDir.listFiles();
        for (File f : fileObjects) {
            String type = f.isDirectory() ? &#34;[DIR]&#34; : &#34;[FILE]&#34;;
            System.out.println(type + &#34; &#34; + f.getName());
        }
    }
}
</code></pre>
<h2 is-upgraded>Writing to Files</h2>
<p><strong>Using FileWriter:</strong></p>
<pre><code language="language-java" class="language-java">import java.io.*;

public class FileWriteDemo {
    public static void main(String[] args) {
        // Simple write
        try (FileWriter writer = new FileWriter(&#34;output.txt&#34;)) {
            writer.write(&#34;Hello, World!\n&#34;);
            writer.write(&#34;This is a test.\n&#34;);
        } catch (IOException e) {
            System.out.println(&#34;Error writing file: &#34; + e.getMessage());
        }

        // Append mode
        try (FileWriter writer = new FileWriter(&#34;output.txt&#34;, true)) {
            writer.write(&#34;Appended line\n&#34;);
        } catch (IOException e) {
            System.out.println(&#34;Error appending to file: &#34; + e.getMessage());
        }
    }
}
</code></pre>
<p><strong>Using BufferedWriter (More Efficient):</strong></p>
<pre><code language="language-java" class="language-java">import java.io.*;

public class BufferedWriteDemo {
    public static void main(String[] args) {
        try (BufferedWriter writer = new BufferedWriter(new FileWriter(&#34;data.txt&#34;))) {
            writer.write(&#34;Line 1&#34;);
            writer.newLine();  // Platform-independent newline
            writer.write(&#34;Line 2&#34;);
            writer.newLine();
            writer.write(&#34;Line 3&#34;);
            writer.newLine();

            // Write multiple lines
            String[] lines = {&#34;Line 4&#34;, &#34;Line 5&#34;, &#34;Line 6&#34;};
            for (String line : lines) {
                writer.write(line);
                writer.newLine();
            }
        } catch (IOException e) {
            System.out.println(&#34;Error: &#34; + e.getMessage());
        }
    }
}
</code></pre>
<h2 is-upgraded>Reading from Files</h2>
<p><strong>Using FileReader:</strong></p>
<pre><code language="language-java" class="language-java">import java.io.*;

public class FileReadDemo {
    public static void main(String[] args) {
        try (FileReader reader = new FileReader(&#34;data.txt&#34;)) {
            int character;
            while ((character = reader.read()) != -1) {
                System.out.print((char) character);
            }
        } catch (FileNotFoundException e) {
            System.out.println(&#34;File not found: &#34; + e.getMessage());
        } catch (IOException e) {
            System.out.println(&#34;Error reading file: &#34; + e.getMessage());
        }
    }
}
</code></pre>
<p><strong>Using BufferedReader (More Efficient):</strong></p>
<pre><code language="language-java" class="language-java">import java.io.*;

public class BufferedReadDemo {
    public static void main(String[] args) {
        try (BufferedReader reader = new BufferedReader(new FileReader(&#34;data.txt&#34;))) {
            String line;
            int lineNumber = 1;

            while ((line = reader.readLine()) != null) {
                System.out.println(lineNumber + &#34;: &#34; + line);
                lineNumber++;
            }
        } catch (FileNotFoundException e) {
            System.out.println(&#34;File not found: &#34; + e.getMessage());
        } catch (IOException e) {
            System.out.println(&#34;Error reading file: &#34; + e.getMessage());
        }
    }
}
</code></pre>
<aside class="special"><p><strong>Performance Tip:</strong> Always use BufferedReader/BufferedWriter for text files. They&#39;re significantly faster than FileReader/FileWriter for large files!</p>
</aside>
<h2 is-upgraded>CSV File Operations</h2>
<pre><code language="language-java" class="language-java">import java.io.*;
import java.util.ArrayList;
import java.util.List;

public class CSVOperations {

    public static void writeCSV(String filename, List&lt;String[]&gt; data) throws IOException {
        try (BufferedWriter writer = new BufferedWriter(new FileWriter(filename))) {
            for (String[] row : data) {
                writer.write(String.join(&#34;,&#34;, row));
                writer.newLine();
            }
        }
    }

    public static List&lt;String[]&gt; readCSV(String filename) throws IOException {
        List&lt;String[]&gt; data = new ArrayList&lt;&gt;();

        try (BufferedReader reader = new BufferedReader(new FileReader(filename))) {
            String line;
            while ((line = reader.readLine()) != null) {
                String[] fields = line.split(&#34;,&#34;);
                data.add(fields);
            }
        }

        return data;
    }

    public static void main(String[] args) {
        // Write CSV
        List&lt;String[]&gt; contacts = new ArrayList&lt;&gt;();
        contacts.add(new String[]{&#34;Name&#34;, &#34;Email&#34;, &#34;Phone&#34;});
        contacts.add(new String[]{&#34;Alice&#34;, &#34;alice@email.com&#34;, &#34;555-0001&#34;});
        contacts.add(new String[]{&#34;Bob&#34;, &#34;bob@email.com&#34;, &#34;555-0002&#34;});

        try {
            writeCSV(&#34;contacts.csv&#34;, contacts);
            System.out.println(&#34;CSV file created&#34;);

            // Read CSV
            List&lt;String[]&gt; readData = readCSV(&#34;contacts.csv&#34;);
            for (String[] row : readData) {
                System.out.println(String.join(&#34; | &#34;, row));
            }
        } catch (IOException e) {
            System.out.println(&#34;Error: &#34; + e.getMessage());
        }
    }
}
</code></pre>


      </google-codelab-step>
    
      <google-codelab-step label="Build Contact Management System" duration="25">
        <p>Now let&#39;s build the complete Contact Management System integrating all concepts!</p>
<h2 is-upgraded>Contact Model</h2>
<p><strong>Contact.java:</strong></p>
<pre><code language="language-java" class="language-java">public class Contact {
    private String id;
    private String name;
    private String email;
    private String phone;
    private String address;

    public Contact(String id, String name, String email, String phone, String address) {
        this.id = id;
        this.name = name;
        this.email = email;
        this.phone = phone;
        this.address = address;
    }

    // Convert to CSV format
    public String toCSV() {
        return id + &#34;,&#34; + name + &#34;,&#34; + email + &#34;,&#34; + phone + &#34;,&#34; +
               address.replace(&#34;,&#34;, &#34;;&#34;);  // Replace commas in address
    }

    // Create from CSV format
    public static Contact fromCSV(String csvLine) throws InvalidContactException {
        String[] parts = csvLine.split(&#34;,&#34;);

        if (parts.length != 5) {
            throw new InvalidContactException(&#34;Invalid CSV format: &#34; + csvLine);
        }

        return new Contact(
            parts[0].trim(),
            parts[1].trim(),
            parts[2].trim(),
            parts[3].trim(),
            parts[4].trim().replace(&#34;;&#34;, &#34;,&#34;)
        );
    }

    @Override
    public String toString() {
        return &#34;Contact{&#34; +
                &#34;id=&#39;&#34; + id + &#39;\&#39;&#39; +
                &#34;, name=&#39;&#34; + name + &#39;\&#39;&#39; +
                &#34;, email=&#39;&#34; + email + &#39;\&#39;&#39; +
                &#34;, phone=&#39;&#34; + phone + &#39;\&#39;&#39; +
                &#34;, address=&#39;&#34; + address + &#39;\&#39;&#39; +
                &#39;}&#39;;
    }

    // Getters and setters
    public String getId() { return id; }
    public void setId(String id) { this.id = id; }

    public String getName() { return name; }
    public void setName(String name) { this.name = name; }

    public String getEmail() { return email; }
    public void setEmail(String email) { this.email = email; }

    public String getPhone() { return phone; }
    public void setPhone(String phone) { this.phone = phone; }

    public String getAddress() { return address; }
    public void setAddress(String address) { this.address = address; }
}
</code></pre>
<h2 is-upgraded>Contact Manager Service</h2>
<p><strong>ContactManager.java:</strong></p>
<pre><code language="language-java" class="language-java">import java.io.*;
import java.util.*;

public class ContactManager {
    private static final String DATA_FILE = &#34;contacts.csv&#34;;
    private Map&lt;String, Contact&gt; contacts;
    private ContactValidator validator;
    private int nextId;

    public ContactManager() {
        this.contacts = new HashMap&lt;&gt;();
        this.validator = new ContactValidator();
        this.nextId = 1;
        loadContacts();
    }

    public void addContact(String name, String email, String phone, String address)
            throws InvalidContactException, FileOperationException {
        // Validate inputs
        validator.validateName(name);
        validator.validateEmail(email);
        validator.validatePhone(phone);

        // Create contact
        String id = &#34;C&#34; + String.format(&#34;%04d&#34;, nextId++);
        Contact contact = new Contact(id, name, email, phone, address);

        // Add to map
        contacts.put(id, contact);

        // Save to file
        saveContacts();

        System.out.println(&#34;Contact added successfully: &#34; + id);
    }

    public Contact getContact(String id) {
        Contact contact = contacts.get(id);
        if (contact == null) {
            throw new ContactNotFoundException(id);
        }
        return contact;
    }

    public void updateContact(String id, String name, String email,
                             String phone, String address)
            throws InvalidContactException, FileOperationException {
        Contact contact = getContact(id);

        // Validate new values
        validator.validateName(name);
        validator.validateEmail(email);
        validator.validatePhone(phone);

        // Update contact
        contact.setName(name);
        contact.setEmail(email);
        contact.setPhone(phone);
        contact.setAddress(address);

        // Save to file
        saveContacts();

        System.out.println(&#34;Contact updated successfully: &#34; + id);
    }

    public void deleteContact(String id) throws FileOperationException {
        Contact contact = contacts.remove(id);

        if (contact == null) {
            throw new ContactNotFoundException(id);
        }

        // Save to file
        saveContacts();

        System.out.println(&#34;Contact deleted successfully: &#34; + id);
    }

    public List&lt;Contact&gt; searchByName(String name) {
        List&lt;Contact&gt; results = new ArrayList&lt;&gt;();
        String searchLower = name.toLowerCase();

        for (Contact contact : contacts.values()) {
            if (contact.getName().toLowerCase().contains(searchLower)) {
                results.add(contact);
            }
        }

        return results;
    }

    public List&lt;Contact&gt; getAllContacts() {
        return new ArrayList&lt;&gt;(contacts.values());
    }

    private void loadContacts() {
        File file = new File(DATA_FILE);

        if (!file.exists()) {
            System.out.println(&#34;No existing contacts file. Starting fresh.&#34;);
            return;
        }

        try (BufferedReader reader = new BufferedReader(new FileReader(file))) {
            String line;

            while ((line = reader.readLine()) != null) {
                try {
                    Contact contact = Contact.fromCSV(line);
                    contacts.put(contact.getId(), contact);

                    // Update nextId
                    int contactNum = Integer.parseInt(contact.getId().substring(1));
                    if (contactNum &gt;= nextId) {
                        nextId = contactNum + 1;
                    }
                } catch (InvalidContactException e) {
                    System.out.println(&#34;Skipping invalid contact: &#34; + e.getMessage());
                }
            }

            System.out.println(&#34;Loaded &#34; + contacts.size() + &#34; contacts from file.&#34;);

        } catch (FileNotFoundException e) {
            System.out.println(&#34;Contacts file not found: &#34; + e.getMessage());
        } catch (IOException e) {
            System.out.println(&#34;Error loading contacts: &#34; + e.getMessage());
        }
    }

    private void saveContacts() throws FileOperationException {
        try (BufferedWriter writer = new BufferedWriter(new FileWriter(DATA_FILE))) {
            for (Contact contact : contacts.values()) {
                writer.write(contact.toCSV());
                writer.newLine();
            }
        } catch (IOException e) {
            throw new FileOperationException(DATA_FILE, &#34;save&#34;, e);
        }
    }

    public void exportToFile(String filename) throws FileOperationException {
        try (BufferedWriter writer = new BufferedWriter(new FileWriter(filename))) {
            // Write header
            writer.write(&#34;ID,Name,Email,Phone,Address&#34;);
            writer.newLine();

            // Write contacts
            for (Contact contact : contacts.values()) {
                writer.write(contact.toCSV());
                writer.newLine();
            }

            System.out.println(&#34;Contacts exported to: &#34; + filename);

        } catch (IOException e) {
            throw new FileOperationException(filename, &#34;export&#34;, e);
        }
    }

    public void displayAllContacts() {
        if (contacts.isEmpty()) {
            System.out.println(&#34;No contacts found.&#34;);
            return;
        }

        System.out.println(&#34;\n=== ALL CONTACTS ===&#34;);
        System.out.printf(&#34;%-8s %-20s %-30s %-15s %-30s%n&#34;,
                         &#34;ID&#34;, &#34;Name&#34;, &#34;Email&#34;, &#34;Phone&#34;, &#34;Address&#34;);
        System.out.println(&#34;-&#34;.repeat(100));

        for (Contact contact : contacts.values()) {
            System.out.printf(&#34;%-8s %-20s %-30s %-15s %-30s%n&#34;,
                contact.getId(),
                contact.getName(),
                contact.getEmail(),
                contact.getPhone(),
                contact.getAddress()
            );
        }
    }
}
</code></pre>
<h2 is-upgraded>Main Application</h2>
<p><strong>ContactManagementApp.java:</strong></p>
<pre><code language="language-java" class="language-java">import java.util.*;

public class ContactManagementApp {
    private static ContactManager manager;
    private static Scanner scanner;

    public static void main(String[] args) {
        manager = new ContactManager();
        scanner = new Scanner(System.in);

        System.out.println(&#34;========================================&#34;);
        System.out.println(&#34;   CONTACT MANAGEMENT SYSTEM v1.0&#34;);
        System.out.println(&#34;========================================\n&#34;);

        boolean running = true;

        while (running) {
            printMenu();
            int choice = getIntInput(&#34;Enter your choice: &#34;);
            System.out.println();

            try {
                switch (choice) {
                    case 1 -&gt; addContact();
                    case 2 -&gt; viewAllContacts();
                    case 3 -&gt; searchContact();
                    case 4 -&gt; updateContact();
                    case 5 -&gt; deleteContact();
                    case 6 -&gt; exportContacts();
                    case 7 -&gt; {
                        System.out.println(&#34;Thank you for using Contact Manager!&#34;);
                        running = false;
                    }
                    default -&gt; System.out.println(&#34;Invalid choice! Try again.&#34;);
                }
            } catch (ContactNotFoundException e) {
                System.out.println(&#34;Error: &#34; + e.getMessage());
            } catch (InvalidContactException e) {
                System.out.println(&#34;Validation Error: &#34; + e.getMessage());
            } catch (FileOperationException e) {
                System.out.println(&#34;File Error: &#34; + e.getMessage());
                System.out.println(&#34;Operation: &#34; + e.getOperation());
                System.out.println(&#34;File: &#34; + e.getFilename());
            } catch (Exception e) {
                System.out.println(&#34;Unexpected error: &#34; + e.getMessage());
                e.printStackTrace();
            }

            System.out.println();
        }

        scanner.close();
    }

    private static void printMenu() {
        System.out.println(&#34;=== MENU ===&#34;);
        System.out.println(&#34;1. Add Contact&#34;);
        System.out.println(&#34;2. View All Contacts&#34;);
        System.out.println(&#34;3. Search Contact&#34;);
        System.out.println(&#34;4. Update Contact&#34;);
        System.out.println(&#34;5. Delete Contact&#34;);
        System.out.println(&#34;6. Export Contacts&#34;);
        System.out.println(&#34;7. Exit&#34;);
    }

    private static void addContact() throws InvalidContactException, FileOperationException {
        System.out.println(&#34;=== ADD NEW CONTACT ===&#34;);

        String name = getStringInput(&#34;Name: &#34;);
        String email = getStringInput(&#34;Email: &#34;);
        String phone = getStringInput(&#34;Phone: &#34;);
        String address = getStringInput(&#34;Address: &#34;);

        manager.addContact(name, email, phone, address);
    }

    private static void viewAllContacts() {
        manager.displayAllContacts();
    }

    private static void searchContact() {
        System.out.println(&#34;=== SEARCH CONTACT ===&#34;);
        String searchTerm = getStringInput(&#34;Enter name to search: &#34;);

        List&lt;Contact&gt; results = manager.searchByName(searchTerm);

        if (results.isEmpty()) {
            System.out.println(&#34;No contacts found matching: &#34; + searchTerm);
        } else {
            System.out.println(&#34;\nFound &#34; + results.size() + &#34; contact(s):\n&#34;);
            for (Contact contact : results) {
                displayContact(contact);
                System.out.println();
            }
        }
    }

    private static void updateContact() throws InvalidContactException, FileOperationException {
        System.out.println(&#34;=== UPDATE CONTACT ===&#34;);
        String id = getStringInput(&#34;Enter contact ID: &#34;);

        Contact contact = manager.getContact(id);
        displayContact(contact);

        System.out.println(&#34;\nEnter new values (press Enter to keep current):&#34;);

        String name = getStringInput(&#34;Name [&#34; + contact.getName() + &#34;]: &#34;);
        if (name.isEmpty()) name = contact.getName();

        String email = getStringInput(&#34;Email [&#34; + contact.getEmail() + &#34;]: &#34;);
        if (email.isEmpty()) email = contact.getEmail();

        String phone = getStringInput(&#34;Phone [&#34; + contact.getPhone() + &#34;]: &#34;);
        if (phone.isEmpty()) phone = contact.getPhone();

        String address = getStringInput(&#34;Address [&#34; + contact.getAddress() + &#34;]: &#34;);
        if (address.isEmpty()) address = contact.getAddress();

        manager.updateContact(id, name, email, phone, address);
    }

    private static void deleteContact() throws FileOperationException {
        System.out.println(&#34;=== DELETE CONTACT ===&#34;);
        String id = getStringInput(&#34;Enter contact ID: &#34;);

        Contact contact = manager.getContact(id);
        displayContact(contact);

        String confirm = getStringInput(&#34;\nAre you sure you want to delete this contact? (yes/no): &#34;);

        if (confirm.equalsIgnoreCase(&#34;yes&#34;)) {
            manager.deleteContact(id);
        } else {
            System.out.println(&#34;Deletion cancelled.&#34;);
        }
    }

    private static void exportContacts() throws FileOperationException {
        System.out.println(&#34;=== EXPORT CONTACTS ===&#34;);
        String filename = getStringInput(&#34;Enter filename (e.g., backup.csv): &#34;);
        manager.exportToFile(filename);
    }

    private static void displayContact(Contact contact) {
        System.out.println(&#34;ID:      &#34; + contact.getId());
        System.out.println(&#34;Name:    &#34; + contact.getName());
        System.out.println(&#34;Email:   &#34; + contact.getEmail());
        System.out.println(&#34;Phone:   &#34; + contact.getPhone());
        System.out.println(&#34;Address: &#34; + contact.getAddress());
    }

    private static String getStringInput(String prompt) {
        System.out.print(prompt);
        return scanner.nextLine().trim();
    }

    private static int getIntInput(String prompt) {
        System.out.print(prompt);
        while (!scanner.hasNextInt()) {
            scanner.next();
            System.out.print(&#34;Invalid input. &#34; + prompt);
        }
        int value = scanner.nextInt();
        scanner.nextLine();  // Consume newline
        return value;
    }
}
</code></pre>


      </google-codelab-step>
    
      <google-codelab-step label="Testing and Error Scenarios" duration="8">
        <p>Let&#39;s test our system with various scenarios including error cases.</p>
<h2 is-upgraded>Test Scenarios</h2>
<p><strong>1. Normal Operations:</strong></p>
<pre>1. Add contacts with valid data
2. View all contacts
3. Search by name
4. Update contact information
5. Delete a contact
6. Export to backup file
</pre>
<p><strong>2. Validation Errors:</strong></p>
<p>Try adding contacts with:</p>
<ul>
<li>Empty name</li>
<li>Invalid email (no @ symbol)</li>
<li>Phone with less than 10 digits</li>
</ul>
<p><strong>3. File Errors:</strong></p>
<ul>
<li>Delete <code>contacts.csv</code> while app is running</li>
<li>Try exporting to a read-only directory</li>
<li>Corrupt the CSV file (add invalid lines)</li>
</ul>
<p><strong>4. Not Found Errors:</strong></p>
<ul>
<li>Try to update non-existent contact ID</li>
<li>Try to delete non-existent contact ID</li>
</ul>
<h2 is-upgraded>Sample Test Session</h2>
<pre>========================================
   CONTACT MANAGEMENT SYSTEM v1.0
========================================

Loaded 0 contacts from file.

=== MENU ===
...
Enter your choice: 1

=== ADD NEW CONTACT ===
Name: Alice Johnson
Email: alice@email.com
Phone: 555-1234-5678
Address: 123 Main St, City
Contact added successfully: C0001

=== MENU ===
...
Enter your choice: 1

Name: Bob
Email: bob-email.com
Phone: 123
Address: Test
Validation Error: Invalid email format: bob-email.com

=== MENU ===
...
Enter your choice: 2

=== ALL CONTACTS ===
ID       Name                 Email                          Phone           Address
----------------------------------------------------------------------------------------------------
C0001    Alice Johnson        alice@email.com                555-1234-5678   123 Main St, City
</pre>
<aside class="special"><p><strong>Testing Tip:</strong> Always test both happy paths (normal operations) and edge cases (errors, invalid data) to ensure robust error handling.</p>
</aside>


      </google-codelab-step>
    
      <google-codelab-step label="Best Practices and Patterns" duration="5">
        <p>Let&#39;s review best practices for exception handling and file operations.</p>
<h2 is-upgraded>Exception Handling Best Practices</h2>
<p><strong>1. Be Specific:</strong></p>
<pre><code language="language-java" class="language-java">// Bad - too generic
catch (Exception e) {
    e.printStackTrace();
}

// Good - specific handling
catch (FileNotFoundException e) {
    System.out.println(&#34;File not found: &#34; + e.getMessage());
} catch (IOException e) {
    System.out.println(&#34;Error reading file: &#34; + e.getMessage());
}
</code></pre>
<p><strong>2. Don&#39;t Swallow Exceptions:</strong></p>
<pre><code language="language-java" class="language-java">// Bad - silent failure
try {
    riskyOperation();
} catch (Exception e) {
    // Do nothing
}

// Good - at least log it
try {
    riskyOperation();
} catch (Exception e) {
    System.err.println(&#34;Error: &#34; + e.getMessage());
    // Or use logging framework
}
</code></pre>
<p><strong>3. Clean Up Resources:</strong></p>
<pre><code language="language-java" class="language-java">// Always use try-with-resources for AutoCloseable
try (BufferedReader reader = new BufferedReader(new FileReader(file))) {
    // Use reader
}  // Automatically closed
</code></pre>
<p><strong>4. Provide Context:</strong></p>
<pre><code language="language-java" class="language-java">// Good - helpful error messages
throw new InvalidContactException(
    &#34;Invalid email format: &#34; + email + &#34;. Must contain @ symbol.&#34;
);
</code></pre>
<h2 is-upgraded>File I/O Best Practices</h2>
<p><strong>1. Check File Existence:</strong></p>
<pre><code language="language-java" class="language-java">File file = new File(&#34;data.txt&#34;);
if (!file.exists()) {
    file.createNewFile();
}
</code></pre>
<p><strong>2. Use Absolute Paths When Possible:</strong></p>
<pre><code language="language-java" class="language-java">File file = new File(System.getProperty(&#34;user.home&#34;) + &#34;/data/contacts.csv&#34;);
</code></pre>
<p><strong>3. Handle Large Files Efficiently:</strong></p>
<pre><code language="language-java" class="language-java">// Read line by line, don&#39;t load entire file
try (BufferedReader reader = new BufferedReader(new FileReader(file))) {
    String line;
    while ((line = reader.readLine()) != null) {
        processLine(line);
    }
}
</code></pre>
<p><strong>4. Use Proper Character Encoding:</strong></p>
<pre><code language="language-java" class="language-java">try (BufferedWriter writer = new BufferedWriter(
        new OutputStreamWriter(new FileOutputStream(file), StandardCharsets.UTF_8))) {
    writer.write(&#34;Content with special chars: Ã¼Ã±Ã­Ã§Ã¶dÃ©&#34;);
}
</code></pre>


      </google-codelab-step>
    
      <google-codelab-step label="Conclusion" duration="2">
        <p>Congratulations! ðŸŽ‰ You&#39;ve mastered exception handling and file I/O in Java!</p>
<h2 is-upgraded>What You&#39;ve Learned</h2>
<ul>
<li>âœ… <strong>Exception Hierarchy:</strong> Understanding checked vs unchecked exceptions</li>
<li>âœ… <strong>Try-Catch-Finally:</strong> Handling errors gracefully</li>
<li>âœ… <strong>Try-With-Resources:</strong> Automatic resource management</li>
<li>âœ… <strong>Custom Exceptions:</strong> Domain-specific error handling</li>
<li>âœ… <strong>Throws/Throw:</strong> Declaring and throwing exceptions</li>
<li>âœ… <strong>File Operations:</strong> Reading, writing, and managing files</li>
<li>âœ… <strong>CSV Processing:</strong> Structured data storage</li>
<li>âœ… <strong>Error Recovery:</strong> Building robust applications</li>
</ul>
<h2 is-upgraded>Key Takeaways</h2>
<ol type="1">
<li><strong>Always handle exceptions</strong> - Never let them crash your application</li>
<li><strong>Use try-with-resources</strong> - Automatic cleanup is safer</li>
<li><strong>Be specific</strong> - Catch specific exceptions, provide helpful messages</li>
<li><strong>Validate input</strong> - Prevent errors before they occur</li>
<li><strong>Clean up resources</strong> - Close files, connections, streams</li>
<li><strong>Custom exceptions</strong> - Create meaningful error types for your domain</li>
<li><strong>Fail gracefully</strong> - Provide users with actionable error messages</li>
</ol>
<h2 is-upgraded>Next Steps</h2>
<p>Continue building on these skills:</p>
<ul>
<li><strong>Codelab 1.4:</strong> Collections Framework &amp; Generics</li>
<li><strong>Codelab 1.5:</strong> Memory Management &amp; Garbage Collection</li>
</ul>
<h2 is-upgraded>Practice Exercises</h2>
<p>Enhance your Contact Manager:</p>
<ol type="1">
<li><strong>Import from CSV</strong> - Allow importing contacts from external CSV files</li>
<li><strong>Data Validation</strong> - Add more validation rules (unique emails, phone format)</li>
<li><strong>Backup/Restore</strong> - Automatic backups with timestamps</li>
<li><strong>Search Enhancement</strong> - Search by email, phone, or any field</li>
<li><strong>Logging</strong> - Add proper logging instead of System.out.println</li>
<li><strong>JSON Support</strong> - Support JSON format in addition to CSV</li>
<li><strong>Duplicate Detection</strong> - Warn when adding similar contacts</li>
</ol>
<h2 is-upgraded>Additional Resources</h2>
<ul>
<li><a href="https://docs.oracle.com/javase/tutorial/essential/exceptions/" target="_blank">Java Exception Handling Guide</a></li>
<li><a href="https://docs.oracle.com/javase/tutorial/essential/io/" target="_blank">Java I/O Tutorial</a></li>
<li><a href="https://www.oreilly.com/library/view/effective-java/9780134686097/" target="_blank">Effective Java - Chapter on Exceptions</a></li>
<li><a href="https://docs.oracle.com/javase/tutorial/essential/io/fileio.html" target="_blank">Java NIO (New I/O)</a></li>
</ul>
<aside class="special"><p><strong>Excellent Work!</strong> You&#39;ve built a production-quality application with robust error handling and file persistence. These skills are essential for real-world Java development!</p>
</aside>


      </google-codelab-step>
    
  </google-codelab>

  <script src="https://storage.googleapis.com/claat-public/native-shim.js"></script>
  <script src="https://storage.googleapis.com/claat-public/custom-elements.min.js"></script>
  <script src="https://storage.googleapis.com/claat-public/codelab-elements.js"></script>
  <script src="//support.google.com/inapp/api.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.11.1/build/highlight.min.js"></script>
  <script src="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.js"></script>
  <script>
    hljs.highlightAll();
    hljs.addPlugin(new CopyButtonPlugin({ autohide: false}));
    
    
    document.addEventListener('DOMContentLoaded', function() {
      const homeUrl = "\/springboot_course\/";
      const arrowBack = document.getElementById('arrow-back');
      const doneBtn = document.getElementById('done');
      if (arrowBack) arrowBack.href = homeUrl;
      if (doneBtn) doneBtn.href = homeUrl;
    });
    
  </script>

</body>
</html>
